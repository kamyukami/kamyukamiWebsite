<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Pluie Stylis√©e</title>
  <style>
    body { margin: 0; overflow: hidden; background: black; }
    canvas { display: block; position: absolute; top: 0; left: 0; z-index: 0; }
    #textOverlay {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-family: 'Arial Black', sans-serif;
      font-size: 72px;
      color: white;
      mix-blend-mode: difference;
      pointer-events: none;
      z-index: 1;
    }
  </style>
</head>
<body>
  <div id="textOverlay">PLUIE</div>
  <canvas id="rainCanvas"></canvas>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r148/three.min.js"></script>
  <script>
    const canvas = document.getElementById("rainCanvas");
    const renderer = new THREE.WebGLRenderer({ canvas: canvas });
    renderer.setSize(window.innerWidth, window.innerHeight);

    const scene = new THREE.Scene();
    const camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 1);

    const uniforms = {
      uTime: { value: 0.0 },
      uResolution: { value: new THREE.Vector2(window.innerWidth, window.innerHeight) }
    };

    const material = new THREE.ShaderMaterial({
      uniforms,
      vertexShader: `
        void main() {
          gl_Position = vec4(position, 1.0);
        }
      `,
      fragmentShader: `
        precision mediump float;
        uniform float uTime;
        uniform vec2 uResolution;

        float rand(vec2 co) {
          return fract(sin(dot(co.xy, vec2(12.9898,78.233))) * 43758.5453);
        }

        void main() {
          vec2 uv = gl_FragCoord.xy / uResolution.xy;
          uv.y += uTime * 0.8; // scroll vers le bas

          float line = step(0.99, fract(uv.y * 30.0 + rand(floor(uv * 100.0))));

          vec3 rainColor = vec3(0.2, 0.5, 1.0) * line;

          gl_FragColor = vec4(rainColor, 1.0);
        }
      `
    });

    const quad = new THREE.Mesh(new THREE.PlaneGeometry(2, 2), material);
    scene.add(quad);

    function animate(time) {
      uniforms.uTime.value = time * 0.001;
      renderer.render(scene, camera);
      requestAnimationFrame(animate);
    }

    animate();

    window.addEventListener('resize', () => {
      renderer.setSize(window.innerWidth, window.innerHeight);
      uniforms.uResolution.value.set(window.innerWidth, window.innerHeight);
    });
  </script>
</body>
</html>
